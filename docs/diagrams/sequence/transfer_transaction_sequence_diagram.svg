<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="585px" preserveAspectRatio="none" style="width:738px;height:585px;background:#FFFFFF;" version="1.1" viewBox="0 0 738 585" width="738px" zoomAndPan="magnify"><title>Transfer Transaction Sequence Diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="317.9873" x="211.0151" y="27.9951">Transfer Transaction Sequence Diagram</text><g><title>BankingService</title><rect fill="#FFFFFF" height="345.2656" style="stroke:#181818;stroke-width:1;" width="10" x="403.9663" y="149.7266"/></g><g><title>SupabaseClient</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="654.4531" y="178.8594"/></g><g><title>SupabaseClient</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="654.4531" y="261.2578"/></g><rect fill="none" height="265" style="stroke:#000000;stroke-width:1.5;" width="721.0176" x="10" y="222.9922"/><g><title>Customer</title><rect fill="#000000" fill-opacity="0.00000" height="386.3984" width="8" x="53.002" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="57" x2="57" y1="118.5938" y2="504.9922"/></g><g><title>BankingService</title><rect fill="#000000" fill-opacity="0.00000" height="386.3984" width="8" x="404.9663" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="408.689" x2="408.689" y1="118.5938" y2="504.9922"/></g><g><title>SupabaseClient</title><rect fill="#000000" fill-opacity="0.00000" height="386.3984" width="8" x="655.4531" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="658.8887" x2="658.8887" y1="118.5938" y2="504.9922"/></g><g class="participant participant-head" data-participant="Customer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.0039" x="20" y="115.292">Customer</text><ellipse cx="57.002" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57.002,58.7969 L57.002,85.7969 M44.002,66.7969 L70.002,66.7969 M57.002,85.7969 L44.002,100.7969 M57.002,85.7969 L70.002,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Customer"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.0039" x="20" y="516.9873">Customer</text><ellipse cx="57.002" cy="528.7891" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M57.002,536.7891 L57.002,563.7891 M44.002,544.7891 L70.002,544.7891 M57.002,563.7891 L44.002,578.7891 M57.002,563.7891 L70.002,578.7891" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="BankingService"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.5547" x="347.689" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5547" x="354.689" y="107.292">BankingService</text></g><g class="participant participant-tail" data-participant="BankingService"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.5547" x="347.689" y="503.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5547" x="354.689" y="523.9873">BankingService</text></g><g class="participant participant-head" data-participant="SupabaseClient"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1289" x="597.8887" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1289" x="604.8887" y="107.292">SupabaseClient</text></g><g class="participant participant-tail" data-participant="SupabaseClient"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1289" x="597.8887" y="503.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1289" x="604.8887" y="523.9873">SupabaseClient</text></g><g><title>BankingService</title><rect fill="#FFFFFF" height="345.2656" style="stroke:#181818;stroke-width:1;" width="10" x="403.9663" y="149.7266"/></g><g><title>SupabaseClient</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="654.4531" y="178.8594"/></g><g><title>SupabaseClient</title><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1;" width="10" x="654.4531" y="261.2578"/></g><g class="message" data-participant-1="Customer" data-participant-2="BankingService"><polygon fill="#181818" points="391.9663,145.7266,401.9663,149.7266,391.9663,153.7266,395.9663,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="57.002" x2="397.9663" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327.9644" x="64.002" y="144.6606">transfer(source_account, target_account, amount)</text></g><g class="message" data-participant-1="BankingService" data-participant-2="SupabaseClient"><polygon fill="#181818" points="642.4531,174.8594,652.4531,178.8594,642.4531,182.8594,646.4531,178.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="413.9663" x2="648.4531" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.5225" x="420.9663" y="173.7935">fetch balances for both accounts</text></g><g class="message" data-participant-1="SupabaseClient" data-participant-2="BankingService"><polygon fill="#181818" points="424.9663,203.9922,414.9663,207.9922,424.9663,211.9922,420.9663,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="418.9663" x2="658.4531" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.877" x="430.9663" y="202.9263">account balances</text></g><path d="M10,222.9922 L74.4429,222.9922 L74.4429,230.125 L64.4429,240.125 L10,240.125 L10,222.9922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="265" style="stroke:#000000;stroke-width:1.5;" width="721.0176" x="10" y="222.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="236.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107.3145" x="89.4429" y="235.2026">[sufficient funds]</text><g class="message" data-participant-1="BankingService" data-participant-2="SupabaseClient"><polygon fill="#181818" points="642.4531,257.2578,652.4531,261.2578,642.4531,265.2578,646.4531,261.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="413.9663" x2="648.4531" y1="261.2578" y2="261.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.5366" x="420.9663" y="256.1919">deduct amount from source</text></g><g class="message" data-participant-1="SupabaseClient" data-participant-2="BankingService"><polygon fill="#181818" points="424.9663,286.3906,414.9663,290.3906,424.9663,294.3906,420.9663,290.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="418.9663" x2="653.4531" y1="290.3906" y2="290.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.645" x="430.9663" y="285.3247">source updated</text></g><g class="message" data-participant-1="BankingService" data-participant-2="SupabaseClient"><polygon fill="#181818" points="642.4531,315.5234,652.4531,319.5234,642.4531,323.5234,646.4531,319.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="413.9663" x2="648.4531" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.8325" x="420.9663" y="314.4575">add amount to target</text></g><g class="message" data-participant-1="SupabaseClient" data-participant-2="BankingService"><polygon fill="#181818" points="424.9663,344.6563,414.9663,348.6563,424.9663,352.6563,420.9663,348.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="418.9663" x2="653.4531" y1="348.6563" y2="348.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.9443" x="430.9663" y="343.5903">target updated</text></g><g class="message" data-participant-1="BankingService" data-participant-2="SupabaseClient"><polygon fill="#181818" points="642.4531,373.7891,652.4531,377.7891,642.4531,381.7891,646.4531,377.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="413.9663" x2="648.4531" y1="377.7891" y2="377.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.4868" x="420.9663" y="372.7231">insert transaction record for both</text></g><g class="message" data-participant-1="SupabaseClient" data-participant-2="BankingService"><polygon fill="#181818" points="424.9663,402.9219,414.9663,406.9219,424.9663,410.9219,420.9663,406.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="418.9663" x2="658.4531" y1="406.9219" y2="406.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.6606" x="430.9663" y="401.856">transactions logged</text></g><g class="message" data-participant-1="BankingService" data-participant-2="Customer"><polygon fill="#181818" points="68.002,432.0547,58.002,436.0547,68.002,440.0547,64.002,436.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="62.002" x2="402.9663" y1="436.0547" y2="436.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.751" x="74.002" y="430.9888">transfer successful</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="731.0176" y1="445.0547" y2="445.0547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118.916" x="15" y="455.2651">[insufficient funds]</text><g class="message" data-participant-1="BankingService" data-participant-2="Customer"><polygon fill="#181818" points="68.002,475.9922,58.002,479.9922,68.002,483.9922,64.002,479.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="62.002" x2="402.9663" y1="479.9922" y2="479.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.876" x="74.002" y="474.9263">error - insufficient funds</text></g><!--SRC=[bP91KeGm44NtEKKljSgvW0iNZZV0lTKa7IPbICPEPyvl638WE9Iu8XJq-x_plpZn1E-C8LdYyO1QN0pGq5Uce0dU77QClLBbGsGuvYIn9rRgTeB32xnY-7IXQuWlhimyWrJcGugPDNsWrZ47UG91xaZcT-o7v-D0TnSKMg6KMg6BM9FFs6AYetSKf8XP4ds25ZqMmmbiiTb6EK4LIJDyEQfMfCEzJIfamYj3MpY5NY1bQvs-ycmE9Yc07IiOCbbBlGsm77iORwwCRya1xF4_OY2VJK6OVMxGc9iLYJModNBZp_-JSo4HozYPMZyc7TbCKUuLdma9VEowguFjm7wxAzIfrtEBIwYwH9zizefyei7ntp4lMSHSbZdS6wLWVhPgoVa6]--></g></svg>